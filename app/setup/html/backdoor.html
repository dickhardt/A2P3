<!DOCTYPE html>
<html>
<head>
</head>
<body>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="text/javascript"    src="/js/purl.js"></script>
  <script type="text/javascript" src="/js/common.js"></script>

<H1>A2P3 Backdoor</H1>
<h2>Development Mode</h2>
Enter an email address to login as a previous user, or to create a new user.
<p>
<form action="/dev/login" method="post">
Email: <input type="text" name="email"><br>
<input type="submit" value="Submit">
</form>
<b>Below will login as <i>dev@example.com</i></b>
<ul id='loginList'>
</ul>
<script type="text/javascript">
    $(document).ready( function () {
      var url = null
      var port = (config.port == '80') ? '' : '%3a' + config.port // :8080
      var servers =
        { 'registrar':  'Registar'
        , 'email':      'Email RS'
        , 'si':         'Social Insurance RS'
        , 'health':      'Standard Health RS'
        , 'health.bc':    'BC Health RS'
        , 'health.ab':    'Alberta Health RS'
        , 'people':      'Standard People RS'
        , 'people.bc':    'BC People RS'
        , 'people.ab':    'Alberta People RS'
        }
      $.each( servers, function (host ) {
        url = config.protocol + '://' + host + '.' + config.baseDomain + ':' + config.port +
          '/login?returnURL=http%3a%2f%2fsetup.' + config.baseDomain + port + '%2fbackdoor%2flogin%2fdev%40example.com'
        $('#loginList').append('<li><a href="' + url + '">' + servers[host] + '</a></li>')
      })

      $('#loginList').append('<li>-----------</li>')

      url = config.protocol + '://clinic.' + config.baseDomain + ':' + config.port
      $('#loginList').append('<li><a href="' + url + '">Clinic App</a></li>')

      url = config.protocol + '://bank.' + config.baseDomain + ':' + config.port
      $('#loginList').append('<li><a href="' + url + '">Bank App</a></li>')

     // console.log(config)
    })

</script>

<pre>
NOTE: before this works, you must run "npm test"
  npm install
  npm start

  #in seperate terminal

  npm test
</pre>
</body>
</html>